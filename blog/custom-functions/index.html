<!DOCTYPE html><html><head>
    <title>Custom functions in Stencila : Stencila</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    
  
    <link rel="stylesheet" href="/css/materia.min.css">
    <link rel="stylesheet" href="/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="/css/docsearch.min.css">
    <link rel="stylesheet" href="/css/website.css">
    
  <style type="text/css">
    article {
      margin-bottom: 5em;
      padding-bottom: 2em;
      border-bottom: 1px solid #EEE;
    }
    article.content img {
      display: block;
      width: 90%;
      margin: 0 auto;
    }
    #suggested {
      color: #777;
    }
    #discourse-comments {
      margin-top: 4em;
    }
  </style>
  <link rel="stylesheet" href="/css/prism.css">

  </head>
  <body>
    <header class="header">
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="/"><img src="/img/logo-name.png" alt="Stencila"></a>
        <div class="navbar-burger"><span></span><span></span><span></span></div>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <a class="navbar-item" href="/use">Use</a>
          <a class="navbar-item" href="/learn/intro.html">Learn</a>
          <a class="navbar-item" href="/contribute">Contribute</a>
        </div>
        <div class="navbar-end">
          <!--
          Search temporarily disabled. See issue #2
          <div class="navbar-item">
            <div class="field">
              <p class="control">
                <input id="search" class="input" type="search" placeholder="Search">
              </p>
            </div>
          </div>
          -->
          <a class="navbar-item" href="/community">Community</a>
          <a class="navbar-item" href="/blog">Blog</a>
        </div>
      </div>
    </div>
  </nav>
</header>

    
  <main class="section">
    <div class="container">
      <article class="content">
        <h2 class="title is-2">Custom functions in Stencila</h2>
        <h3 class="is-3">Oliver Buchtala, 17 May 2018</h3>
        <p>Nokome Bentley and Oliver Buchtala have investigated options to write custom functions in Stencila and found a very simple and generic solution.</p>
<p>Cells can return a special value of type <code>function</code>. This does not differ very much from other return values, such as a <code>number</code>.
Returned functions are however special, they are passed around just as the information necessary to ask the Stencila execution context to actually run the function.
This approach introduces only a rather tiny concept, but has a huge impact: for example a cell executed in R can register a function, which can be executed in every other context, e.g. in Javascript.
Reactive evaluation, i.e. automatic updates, are coming for free, as functions are just treated as regular values.</p>
<h2 id="example">Example</h2>
<p>A function could be defined in Javascript:</p>
<pre><code class="language-js">function hello(you) {
  return &quot;Hello &quot; + you + &quot;!&quot;&quot;
}
</code></pre>
<p>When executed in Stencila&apos;s <code>JavascriptContext</code>, this cell returns a function that is known to the Stencila <code>Engine</code> by the name <code>hello</code>.
Any other cell can then call it, for example a cell written in Mini:</p>
<pre><code class="language-mini">me = &apos;Anna&apos;
</code></pre>
<pre><code class="language-mini">hello(me)
</code></pre>
<p>The engine knows that <code>me = &quot;Anna&quot;</code> and that <code>hello</code> is a function registered the by the <code>JavascriptContext</code>.
When it comes to evaluation of the second cell, it will ask the context to evaluate <code>hello</code> with the value <code>Anna</code> for it&apos;s <code>you</code> argument.</p>
<p>This is how it looks in action:</p>
<p><img src="stencila-hello-anna.gif" alt="Example"></p>

      </article>
      
      <div id="discourse-comments">
      </div>
    </div>
  </main>

    <footer class="footer">
  <div class="container">
    <div class="columns">
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> About </h4>
        <a href="/use">Use </a> <br>
        <a href="/learn"> Learn </a> <br>
        <a href="/learn/faq.html"> FAQ  </a>  <br>
      </div>
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> Community </h4>
        <a href="/contribute"> Contribute </a> <br>
        <a href="/community/beta-testing.html"> Beta Testing </a> <br>
        <a href="/community/resources.html"> Resources  </a>  <br>
        <a href="/blog"> Blog  </a>  <br>
      </div>
      <div class="column">
        <h4 class="title is-6 has-text-grey-light"> Contact </h4>
        <a href="mailto:hello@stenci.la">Email </a> <br>
        <a href="https://twitter.com/stencila"> Twitter </a> <br>
        <a href="https://gitter.im/stencila/stencila"> Gitter Chat </a>  <br>
        <a href="https://community.stenci.la/"> Community Forum  </a>  <br>
        <a id="edit-page" class="button" href="https://github.com/stencila/website/edit/master/src/blog/custom-functions/index.md" target="_blank" title="Edit this page">&#x270E; Edit</a>
      </div>
    </div>
    <div class="columns">
      <div class="column has-text-grey-light has-text-centered">
          &#xA9; 2018 Stencila <a href="https://github.com/stencila/stencila/graphs/contributors">contributors</a>
      </div>
   </div>
  </div>
</footer>

  
  
  
  <script type="text/javascript" src="/js/docsearch.min.js"></script>
  <script type="text/javascript" src="/js/website.js"></script>
  

  <script type="text/javascript" src="/js/prism.js"></script>
  <script type="text/javascript" src="/js/prism-bash.min.js"></script>
  <script type="text/javascript" src="/js/prism-json.min.js"></script>
  <script type="text/javascript" src="/js/prism-markdown.min.js"></script>
  <script type="text/javascript" src="/js/prism-mini.js"></script>
  <script type="text/javascript" src="/js/prism-python.min.js"></script>
  <script type="text/javascript" src="/js/prism-r.min.js"></script>
  <script type="text/javascript" src="/js/prism-sql.min.js"></script>

  <script type="text/javascript">
    DiscourseEmbed = {
      discourseUrl: 'https://community.stenci.la/',
      discourseEmbedUrl: window.location.href,
      
    };
    (function() {
      var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
      d.src = DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
    })();
  </script>


</body></html>